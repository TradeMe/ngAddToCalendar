{"version":3,"file":"yahoo-calendar.generator.js","sourceRoot":"","sources":["yahoo-calendar.generator.ts"],"names":[],"mappings":";;;;;;;;;;;;AACA,qEAAiF;AAEpE,QAAA,SAAS,GAAG,gDAAgD,CAAC;AAE1E;IAA4C,0CAAqB;IAE7D,gCAAsB,KAAiB;QAAvC,YACI,kBAAM,KAAK,CAAC,SACf;QAFqB,WAAK,GAAL,KAAK,CAAY;;IAEvC,CAAC;IAEO,sDAAqB,GAA7B;QACI,IAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG;YAChC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,GAAG,uCAAa,CAAC;YACzE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QAExB,+EAA+E;QAC/E,IAAM,iBAAiB,GAAG,aAAa,GAAG,GAAG;YACzC,MAAI,IAAI,CAAC,KAAK,CAAC,CAAC,aAAa,GAAG,EAAE,CAAC,CAAG;YACtC,KAAG,IAAI,CAAC,KAAK,CAAC,CAAC,aAAa,GAAG,EAAE,CAAC,CAAG,CAAC;QAE1C,IAAM,mBAAmB,GAAG,aAAa,GAAG,EAAE,GAAG,EAAE;YAC/C,MAAI,aAAa,GAAG,EAAI;YACxB,KAAG,aAAa,GAAG,EAAI,CAAC;QAE5B,MAAM,CAAC,iBAAiB,GAAG,mBAAmB,CAAC;IACnD,CAAC;IAED,sBAAW,wCAAI;aAAf;YACI,IAAM,KAAK,GAAG,SAAS;YACnB,2BAA2B;YACxB,iBAAS,YAAO,IAAI,CAAC,SAAS,aAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,EAAE,CAAC,gBAAW,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,aAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,EAAE,CAAG,CACrJ,CAAC;YACF,MAAM,CAAC,KAAK;mBACN,YAAU,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,CAAG,CAAA;mBACtD,WAAS,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,EAAE,CAAG,CAAA,CAAC;QACtE,CAAC;;;OAAA;IACL,6BAAC;AAAD,CAAC,AAhCD,CAA4C,+CAAqB,GAgChE;AAhCY,wDAAsB","sourcesContent":["import { IEvent } from '../model/event.model';\r\nimport { BaseCalendarGenerator, MS_IN_MINUTES } from './base-calendar.generator';\r\n\r\nexport const YAHOO_URL = 'http://calendar.yahoo.com/?v=60&view=d&type=20';\r\n\r\nexport class YahooCalendarGenerator extends BaseCalendarGenerator {\r\n\r\n    constructor(protected event: IEvent) {\r\n        super(event);\r\n    }\r\n\r\n    private getYahooEventDuration() {\r\n        const eventDuration = this.event.end ?\r\n            ((this.event.end.getTime() - this.event.start.getTime()) / MS_IN_MINUTES) :\r\n            this.event.duration;\r\n\r\n        // Yahoo dates are crazy, we need to convert the duration from minutes to hh:mm\r\n        const yahooHourDuration = eventDuration < 600 ?\r\n            `0${Math.floor((eventDuration / 60))}` :\r\n            `${Math.floor((eventDuration / 60))}`;\r\n\r\n        const yahooMinuteDuration = eventDuration % 60 < 10 ?\r\n            `0${eventDuration % 60}` :\r\n            `${eventDuration % 60}`;\r\n\r\n        return yahooHourDuration + yahooMinuteDuration;\r\n    }\r\n\r\n    public get href(): string {\r\n        const chunk = encodeURI(\r\n            // tslint:disable-next-line\r\n            `${YAHOO_URL}&st=${this.startTime}&dur=${(this.getYahooEventDuration() || \"\")}&in_loc=${(this.event.address || \"\")}&url=${(this.event.url || \"\")}`,\r\n        );\r\n        return chunk\r\n            + `&title=${encodeURIComponent(this.event.title || '')}`\r\n            + `&desc=${encodeURIComponent(this.event.description || '')}`;\r\n    }\r\n}\r\n"]}