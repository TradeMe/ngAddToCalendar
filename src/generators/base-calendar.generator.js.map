{"version":3,"file":"base-calendar.generator.js","sourceRoot":"","sources":["base-calendar.generator.ts"],"names":[],"mappings":";;AAEa,QAAA,aAAa,GAAG,EAAE,GAAG,IAAI,CAAC;AAC1B,QAAA,qBAAqB,GAAG,YAAY,CAAC;AAElD;IAMI,+BAAsB,KAAiB;QAAjB,UAAK,GAAL,KAAK,CAAY;QACnC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC9C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;IAChD,CAAC;IAED,sBAAc,sCAAG;aAAjB;YACI,MAAM,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE;kBACX,IAAI,CAAC,EAAE,EAAE;kBACT,GAAG,GAAG,IAAI,CAAC,EAAE,EAAE;kBACf,IAAI,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;kBAC7B,GAAG,GAAG,IAAI,CAAC,EAAE,EAAE;kBACf,GAAG,GAAG,IAAI,CAAC,EAAE,EAAE;kBACf,IAAI,CAAC,EAAE,EAAE;kBACT,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;QACnC,CAAC;;;OAAA;IAES,0CAAU,GAApB,UAAqB,IAAU;QAC3B,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,6BAAqB,EAAE,EAAE,CAAC,CAAC;IACjE,CAAC;IAES,gDAAgB,GAA1B,UAA2B,KAAU;QACjC,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACZ,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACtC,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;YAClB,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;QACtE,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,qBAAa,CAAC,CAAC,CAAC,CAAC;IAC/F,CAAC;IAEO,kCAAE,GAAV;QACI,2BAA2B;QAC3B,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IAC3E,CAAC;IACL,4BAAC;AAAD,CAAC,AA1CD,IA0CC;AA1CqB,sDAAqB","sourcesContent":["import { IEvent } from './../model/event.model';\r\n\r\nexport const MS_IN_MINUTES = 60 * 1000;\r\nexport const DATE_POCTUATION_REGEX = /-|:|\\.\\d+/g;\r\n\r\nexport abstract class BaseCalendarGenerator {\r\n    protected startTime: string;\r\n    protected endTime: string;\r\n\r\n    public abstract get href(): string;\r\n\r\n    constructor(protected event: IEvent) {\r\n        this.startTime = this.formatTime(event.start);\r\n        this.endTime = this.calculateEndTime(event);\r\n    }\r\n\r\n    protected get uid(): string {\r\n        return (this.s4()\r\n            + this.s4()\r\n            + '-' + this.s4()\r\n            + '-4' + this.s4().substr(0, 3)\r\n            + '-' + this.s4()\r\n            + '-' + this.s4()\r\n            + this.s4()\r\n            + this.s4()).toLowerCase();\r\n    }\r\n\r\n    protected formatTime(date: Date): string {\r\n        return date.toISOString().replace(DATE_POCTUATION_REGEX, '');\r\n    }\r\n\r\n    protected calculateEndTime(event: any): string {\r\n        if (event.end) {\r\n            return this.formatTime(event.end);\r\n        }\r\n\r\n        if (!event.duration) {\r\n            throw new Error('You have to provide either the duration or end');\r\n        }\r\n\r\n        return this.formatTime(new Date(event.start.getTime() + (event.duration * MS_IN_MINUTES)));\r\n    }\r\n\r\n    private s4(): string {\r\n        // tslint:disable-next-line\r\n        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    }\r\n}\r\n"]}